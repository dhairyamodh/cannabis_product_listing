(this["webpackJsonpdevelopstoday-test-task"]=this["webpackJsonpdevelopstoday-test-task"]||[]).push([[0],{83:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(24),c=n.n(i),s=n(28),o=n(17),d=(n(61),n(20)),l=n(2),u={allProducts:null,isLoading:!1,error:null},p=Object(d.b)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_PRODUCTS_SUCCESS":return console.log("action",t.payload),Object(l.a)(Object(l.a)({},e),{},{allProducts:t.payload.data,isLoading:!e.isLoading});case"GET_ALL_PRODUCTS_FAIL":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!e.isLoading,error:t.error.data});default:return e}}}),f=n(13),j=n.n(f),b=n(18),h=n(19),x=n.n(h),g=n(47),O=n.n(g),m={returnRejectedPromiseOnError:!0,interceptors:{request:[function(e,t){e.getState;return(0,e.dispatch)({type:"SPINNER_START"}),t}],response:[{success:function(e,t){e.getState;var n=e.dispatch;e.getSourceAction;return n({type:"SPINNER_STOP"}),t},error:function(e,t){e.getState;var n,r,a,i=e.dispatch;e.getSourceAction;return console.log("AXIOS Redux ERR :",null===t||void 0===t||null===(n=t.error)||void 0===n||null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message),i({type:"SPINNER_STOP"}),Promise.reject(t)}}]}},v=x.a.create({baseURL:"https://dutchie.com/graphql",responseType:"json"});v.interceptors.request.use(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers["Access-Control-Allow-Origin"]="*",e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var y=O()(v,m),C=n(48);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.c,n=Object(d.d)(p,e,t(Object(d.a)(y,C.a)));return n.subscribe((function(){})),n}var w=n(3),S=n(33),P=n(5),T=n(85),D=n(86),_=(n(45),n(6)),R=n(84),E=n(1),B=function(){return Object(E.jsx)("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(E.jsx)("div",{children:Object(E.jsx)(R.a,{animation:"border",role:"status",children:Object(E.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},I=(n.p,_.a.img({width:200,height:200,padding:10,background:"white",boxShadow:"inset -5px -5px 10px #bebebe,inset 5px 5px 20px #ffffff",objectFit:"cover",borderRadius:30,marginTop:-30,marginLeft:30,marginBottom:30,marginRight:30})),L=_.a.div({width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column",alignItems:"center",marginBottom:50,borderRadius:20,background:"linear-gradient(145deg, #d8d8d8, #f0f0f0)",boxShadow:"15px 15px 60px #bebebe,-10px -10px 20px #ffffff"}),k=_.a.div({width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",padding:"30px 0px"}),N=_.a.div({width:"70%",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-start"}),z=_.a.h5({color:"#444",fontWeight:700,textTransform:"capitalize",fontSize:25}),W=_.a.p({color:"#444",fontSize:20,marginRight:10,fontWeight:500}),F=_.a.p({background:"#defceb",padding:"4px 8px",borderRadius:50,color:"#044f24",fontSize:18,fontWeight:600,textTransform:"uppercase"}),q=_.a.div({width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center"}),M=_.a.div({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}),U=_.a.div({display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",fontWeight:600}),G=_.a.span({fontWeight:700,color:"#858585",fontSize:16}),H=_.a.span({color:"#035e29",fontSize:18}),Q=(_.a.div({width:"50%",display:"flex",flexDirection:"column",justifyContent:"space-between",fontWeight:700}),_.a.span({fontSize:27,fontWeight:800,padding:"10px 0px 10px 30px",color:"#333",borderRadius:10})),X=_.a.span({fontSize:17,paddingLeft:10,color:"#000"}),J=function(){var e=Object(r.useState)([]),t=Object(P.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(0),s=Object(P.a)(c,2),o=s[0],d=s[1],l=Object(r.useState)(0),u=Object(P.a)(l,2),p=u[0],f=u[1],h=Object(r.useState)(20),g=Object(P.a)(h,2),O=g[0],m=(g[1],Object(w.g)().cateName),v=Object(r.useState)(!0),y=Object(P.a)(v,2),C=y[0],A=y[1],_=Object(r.useState)(""),R=Object(P.a)(_,2),J=R[0],K=R[1],V="/graphql?operationName=FilteredProducts&variables=%7B%22includeCannabinoids%22%3Afalse%2C%22showAllSpecialProducts%22%3Afalse%2C%22productsFilter%22%3A%7B%22dispensaryId%22%3A%22609c48195960d500bb8eda47%22%2C%22pricingType%22%3A%22rec%22%2C%22strainTypes%22%3A%5B%5D%2C%22subcategories%22%3A%5B%5D%2C%22Status%22%3A%22Active%22%2C%22removeProductsBelowOptionThresholds%22%3Atrue%2C%22types%22%3A%5B%22".concat(m,"%22%5D%2C%22useCache%22%3Afalse%2C%22sortDirection%22%3A1%2C%22sortBy%22%3Anull%2C%22bypassOnlineThresholds%22%3Afalse%2C%22isKioskMenu%22%3Afalse%7D%2C%22page%22%3A").concat(o,"%2C%22perPage%22%3A").concat(O,"%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22b6ff0c53f33a7971a20ae49e81ab24b70c0095add648534e1c6a140943759883%22%7D%7D"),$=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()(V,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",accept:"*/*"},withCredentials:!0,credentials:"same-origin"}).then((function(e){if(200===e.status){var t=e.data.data.filteredProducts.products;t.length>0?(i([].concat(Object(S.a)(n),Object(S.a)(t))),d(o+1)):A(!1)}})).catch((function(e){K("An error occured")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return C||setTimeout((function(){if(n.length>=20){var e=n.length/O;console.log("totalPages",n.length,Math.ceil(e),p,p===e),p===Math.ceil(e)-1?f(0):f(p+1)}}),15e3),a.a.useEffect((function(){C&&$()}),[m,o]),console.log("products",n.length,"localPage * rowsPerPage",p*O,"localPage * rowsPerPage + rowsPerPage",p*O+O),Object(E.jsx)("div",{style:{background:"#e0e0e0",padding:50},children:Object(E.jsx)(T.a,{children:""!=J?Object(E.jsx)("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"An Error occured"}):C?Object(E.jsx)(B,{}):null===n||void 0===n?void 0:n.slice(p*O,p*O+O).map((function(e,t){return Object(E.jsx)(D.a,{sm:12,md:6,children:Object(E.jsxs)(L,{children:[Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",borderRadius:20},children:[Object(E.jsx)(I,{src:e.Image}),Object(E.jsxs)(k,{children:[Object(E.jsx)(z,{children:e.cName}),Object(E.jsxs)(N,{children:[Object(E.jsxs)(q,{children:[Object(E.jsx)(W,{children:e.brandName}),Object(E.jsx)(F,{children:e.strainType})]}),Object(E.jsxs)(M,{children:[Object(E.jsxs)(U,{children:[Object(E.jsx)(G,{children:"THC"}),Object(E.jsx)(H,{children:e.THCContent.range.map((function(e){return e+"%"})).join(" - ")})]}),Object(E.jsxs)(U,{style:{marginLeft:20},children:[Object(E.jsx)(G,{children:"CBD"}),Object(E.jsx)(H,{children:e.CBDContent.range.map((function(e){return e+"%"})).join(" - ")})]})]})]})]})]}),Object(E.jsx)("div",{style:{display:"flex",flexDirection:"row",background:"#00ff70",width:"100%",borderRadius:"0 0 20px 20px",boxShadow:"inset 20px 20px 60px #d8d8d8, inset -20px -20px 60px #ffffff"},children:e.recPrices.map((function(t,n){return Object(E.jsxs)(Q,{children:["$",t,Object(E.jsxs)(X,{children:["(",e.Options[n],")"]})]})}))})]})})}))})})},K=n(87),V=function(){var e=Object(r.useState)([]),t=Object(P.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(!0),s=Object(P.a)(c,2),o=s[0],d=s[1],l=Object(r.useState)(""),u=Object(P.a)(l,2),p=u[0],f=u[1],h=Object(w.f)(),g=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("/graphql?operationName=DispensaryCategoriesQuery&variables=%7B%22productsFilter%22%3A%7B%22dispensaryId%22%3A%22609c48195960d500bb8eda47%22%2C%22pricingType%22%3A%22rec%22%2C%22Status%22%3A%22Active%22%2C%22removeProductsBelowOptionThresholds%22%3Atrue%2C%22useCache%22%3Atrue%2C%22isKioskMenu%22%3Afalse%7D%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22537c93e54dde4f87ba0623d2fde0a213a6d4690acae1b94b9e35b2b0ac775ae5%22%7D%7D",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",accept:"*/*"},withCredentials:!0,credentials:"same-origin"}).then((function(e){if(200===e.status){var t=e.data.data.filteredProducts.categories;t.length>0&&(i(t),d(!1))}})).catch((function(e){f("An error occured")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){o&&g()}),[]),Object(E.jsx)("div",{children:""!=p?Object(E.jsx)("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"An Error occured"}):o?Object(E.jsx)(B,{}):null===n||void 0===n?void 0:n.map((function(e,t){return Object(E.jsx)(K.a,{style:{marginRight:20},onClick:function(){h.push("/cannabis_product_listing/".concat(e))},children:e},t)}))})},$=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(w.b,{exact:!0,path:"/",render:function(){return Object(E.jsx)(w.a,{to:"/cannabis_product_listing"})}}),Object(E.jsx)(w.b,{exact:!0,path:"/cannabis_product_listing",component:V}),Object(E.jsx)(w.b,{exact:!0,path:"/cannabis_product_listing/:cateName",component:J})]})},Y=function(){return Object(E.jsx)(a.a.Fragment,{children:Object(E.jsx)("div",{children:Object(E.jsx)(w.b,{path:"/",component:$})})})};var Z=function(){return Object(E.jsx)(o.a,{children:Object(E.jsx)(s.a,{store:A(),children:Object(E.jsx)(Y,{})})})};c.a.render(Object(E.jsx)(Z,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.bed74754.chunk.js.map